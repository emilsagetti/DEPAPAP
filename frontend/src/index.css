@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    html {
        background-color: #050B14;
        /* Prevents white flash on overscroll */
    }

    body {
        @apply bg-[#050B14] text-[#E0E0E0];
        background-image:
            /* Dot pattern overlay */
            radial-gradient(circle at center, rgba(255, 255, 255, 0.04) 1px, transparent 1px),
            /* Gradient orbs */
            radial-gradient(circle at 10% 20%, rgba(6, 182, 212, 0.15) 0%, transparent 40%),
            radial-gradient(circle at 90% 80%, rgba(124, 58, 237, 0.10) 0%, transparent 40%);
        background-size: 32px 32px, 100% 100%, 100% 100%;
        background-attachment: fixed;
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-track {
        background: transparent;
    }

    ::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.2);
    }
}

@layer components {

    /* Glassmorphism Card (Premium Ice) */
    .glass-card {
        @apply rounded-glass border border-white/10;
        background: rgba(8, 20, 30, 0.65);
        backdrop-filter: blur(24px);
        box-shadow:
            0 10px 40px rgba(0, 0, 0, 0.2),
            inset 0 1px 0 rgba(255, 255, 255, 0.08);
        /* Inner highlight */
        transition: all 0.2s ease;
    }

    .glass-card:hover {
        border-color: rgba(6, 182, 212, 0.3);
        /* Teal glow on border */
        box-shadow:
            0 14px 50px rgba(0, 0, 0, 0.3),
            inset 0 1px 0 rgba(255, 255, 255, 0.12),
            0 0 20px rgba(6, 182, 212, 0.05);
        /* Soft teal glow */
        transform: translateY(-2px);
    }

    /* Old light class - alias to dark now */
    .glass-card-light {
        @apply glass-card;
    }

    /* Glassmorphism Panel (headers, footers) */
    .glass-panel {
        @apply border-b border-white/5;
        background: rgba(5, 11, 20, 0.85);
        backdrop-filter: blur(16px);
    }

    .glass-panel-light {
        @apply glass-panel;
    }

    /* Glass Button */
    .glass-btn {
        @apply rounded-glass-sm border border-white/10 px-4 py-2.5 text-white/90 font-medium;
        background: rgba(255, 255, 255, 0.05);
        transition: all 0.2s ease;
    }

    .glass-btn:hover {
        @apply border-[#06B6D4]/40 bg-[#06B6D4]/10 text-white;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(6, 182, 212, 0.1);
    }

    /* Glass Input */
    .glass-input {
        @apply w-full rounded-glass-sm border border-white/10 bg-white/5 px-4 py-3 text-white placeholder:text-white/30;
        outline: none;
        transition: all 0.2s ease;
    }

    .glass-input:focus {
        @apply border-[#06B6D4]/50 bg-white/10;
        box-shadow: 0 0 0 2px rgba(6, 182, 212, 0.15);
    }

    /* Telegram-style chat sidebar */
    .chat-sidebar {
        @apply fixed left-4 top-24 bottom-4 rounded-glass border border-white/40;
        width: 76px;
        background: rgba(255, 255, 255, 0.65);
        backdrop-filter: blur(20px);
        box-shadow:
            0 20px 60px rgba(15, 40, 55, 0.1),
            inset 0 1px 0 rgba(255, 255, 255, 0.5);
        transition:
            width 0.46s cubic-bezier(0.16, 1, 0.3, 1),
            padding 0.46s cubic-bezier(0.16, 1, 0.3, 1);
        z-index: 40;
        overflow: hidden;
    }

    .chat-sidebar:hover {
        width: 320px;
        padding: 12px 14px;
        background: rgba(255, 255, 255, 0.85);
        /* Slightly more opaque on hover */
    }

    /* Glass Modal Overlay */
    .glass-overlay {
        @apply fixed inset-0 z-50;
        background: rgba(15, 40, 55, 0.40);
        /* Navy tinge */
        backdrop-filter: blur(8px);
    }

    /* Glass Dialog */
    .glass-dialog {
        @apply rounded-glass border border-white/50;
        background: rgba(255, 255, 255, 0.85);
        /* Light glass dialog */
        backdrop-filter: blur(30px);
        box-shadow: 0 32px 100px rgba(15, 40, 55, 0.25);
    }

    /* Telegram-style message bubbles */
    .message-bubble-own {
        @apply rounded-[20px] rounded-br-[6px] text-white;
        background: linear-gradient(135deg, #023A55 0%, #0F2837 100%);
        /* Depa Brand Gradient */
        box-shadow: 0 4px 20px rgba(2, 58, 85, 0.2);
    }

    .message-bubble-other {
        @apply rounded-[20px] rounded-bl-[6px] text-depa-dark;
        background: rgba(255, 255, 255, 0.6);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.4);
        box-shadow: 0 2px 8px rgba(15, 40, 55, 0.05);
    }

    /* Expandable chat list sidebar */
    .chat-list-sidebar {
        @apply fixed left-0 top-0 bottom-0 border-r border-white/20 overflow-hidden;
        width: 76px;
        background: rgba(15, 40, 55, 0.90);
        /* Dark sidebar to match header? Or light? User said "Sidebar... with Premium Glass". Assuming light or dark. Let's make it dark to match header flow or light. Use provided formula for "Sidebar": bg-white/70. Okay, I'll switch sidebar to light glass. */
        background: rgba(255, 255, 255, 0.70);
        backdrop-filter: blur(20px);
        transition: width 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        z-index: 30;
    }

    .chat-list-sidebar:hover,
    .chat-list-sidebar.expanded {
        width: 340px;
        background: rgba(255, 255, 255, 0.85);
    }

    /* Glass card hover effect - DEPRECATED/ALIASED */
    .glass-card-light-hover {
        @apply glass-card;
    }
}

@layer utilities {

    /* Reduced motion fallback */
    @media (prefers-reduced-motion: reduce) {

        .glass-card,
        .glass-panel,
        .glass-btn,
        .chat-sidebar {
            transition: none !important;
            backdrop-filter: none !important;
        }
    }
}